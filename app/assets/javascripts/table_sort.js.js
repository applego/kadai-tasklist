// Generated by CoffeeScript 2.3.2
(function() {
  $(function() {
    return $('.table-sortable').sortable({
      axis: 'y',
      items: '.item',
      update: function(e, ui) {
        var item, item_data, params;
        item = ui.item;
        item_data = item.data();
        params = {
          _method: 'put'
        };
        params[item_data.modelName] = {
          row_order_position: item.index()
        };
        return $.ajax({
          type: 'POST',
          url: item_data.updateUrl,
          dataType: 'json',
          data: params
        });
      },
      start: function(e, ui) {
        var cells, tableWidth, widthForEachCell;
        tableWidth = $(this).width();
        cells = ui.item.children('td');
        widthForEachCell = tableWidth / cells.length + 'px';
        return cells.css('width', widthForEachCell);
      },
      stop: function(e, ui) {
        return ui.item.children('td').effect('highlight');
      }
    });
  });

}).call(this);
